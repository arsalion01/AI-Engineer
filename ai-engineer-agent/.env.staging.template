# AI Engineer Agent - Staging Environment Configuration
# Copy this file to .env.staging and fill in your staging values

# ============================================================================
# Application Settings
# ============================================================================
NODE_ENV=staging
APP_URL=https://staging.your-domain.com
PORT=3000
LOG_LEVEL=debug

# Domain and SSL settings
DOMAIN=staging.your-domain.com
SSL_EMAIL=admin@your-domain.com

# ============================================================================
# Database Configuration
# ============================================================================
# Main PostgreSQL Database
POSTGRES_USER=ai_engineer_staging
POSTGRES_PASSWORD=staging-password-change-me
POSTGRES_DB=ai_engineer_agent_staging
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://ai_engineer_staging:staging-password-change-me@postgres:5432/ai_engineer_agent_staging

# TimescaleDB for Analytics
ANALYTICS_DATABASE_URL=postgresql://ai_engineer_staging:staging-password-change-me@timescaledb:5432/ai_engineer_analytics_staging

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_PASSWORD=staging-redis-password
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://:staging-redis-password@redis:6379

# ============================================================================
# Authentication & Security
# ============================================================================
# Google OAuth Configuration (staging app)
GOOGLE_CLIENT_ID=your-staging-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-staging-google-client-secret

# JWT Configuration (use different secrets for staging)
JWT_SECRET=staging-jwt-secret-minimum-32-characters-long
JWT_EXPIRES_IN=24h

# Encryption key for sensitive data (different from production)
ENCRYPTION_KEY=staging-32-character-encryption-key

# Session configuration
SESSION_SECRET=staging-session-secret-key-here
SESSION_MAX_AGE=86400000

# ============================================================================
# AI Services Configuration
# ============================================================================
# Google Gemini API (can use same key but lower limits)
GEMINI_API_KEY=your-gemini-api-key-here

# Reduced rate limiting for staging
GEMINI_REQUESTS_PER_DAY=500
GEMINI_REQUESTS_PER_HOUR=50
GEMINI_REQUESTS_PER_MINUTE=5

# ============================================================================
# Email Configuration
# ============================================================================
# Use test email service for staging
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_SECURE=false
SMTP_USER=your-mailtrap-user
SMTP_PASSWORD=your-mailtrap-password
FROM_EMAIL=staging@your-domain.com
FROM_NAME=AI Engineer Agent (Staging)

# ============================================================================
# Monitoring & Analytics
# ============================================================================
# Sentry for error tracking (separate staging project)
SENTRY_DSN=https://your-staging-sentry-dsn@sentry.io/staging-project-id

# Grafana Configuration
GRAFANA_USER=admin
GRAFANA_PASSWORD=staging-grafana-password

# Analytics settings
ENABLE_ANALYTICS=true
ANALYTICS_RETENTION_DAYS=30

# ============================================================================
# File Storage & Uploads
# ============================================================================
# File upload limits (same as production)
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=.json,.txt,.md,.pdf,.png,.jpg,.jpeg,.zip

# Storage configuration
STORAGE_TYPE=local
UPLOAD_PATH=/app/uploads

# S3 Configuration (staging bucket if using cloud storage)
# AWS_ACCESS_KEY_ID=your-staging-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-staging-aws-secret-key
# AWS_REGION=us-east-1
# S3_BUCKET=your-staging-s3-bucket

# ============================================================================
# Rate Limiting & Security
# ============================================================================
# More relaxed rate limiting for testing
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX_REQUESTS=200

# CORS Configuration
CORS_ORIGIN=https://staging.your-domain.com
CORS_CREDENTIALS=true

# Security Headers
HELMET_ENABLED=true
TRUST_PROXY=1

# ============================================================================
# Background Jobs & Processing
# ============================================================================
# Job queue configuration
JOB_CONCURRENCY=3
JOB_ATTEMPTS=3
JOB_BACKOFF_DELAY=2000

# Workflow processing
WORKFLOW_TIMEOUT=180000
MAX_CONCURRENT_WORKFLOWS=5

# ============================================================================
# GitHub Integration (Optional)
# ============================================================================
# GitHub OAuth for repository access
# GITHUB_CLIENT_ID=your-staging-github-client-id
# GITHUB_CLIENT_SECRET=your-staging-github-client-secret

# GitHub repository for workflow templates
WORKFLOW_REPO_URL=https://github.com/oxbshw/ultimate-n8n-ai-workflows.git
WORKFLOW_REPO_BRANCH=staging

# ============================================================================
# Backup & Maintenance
# ============================================================================
# Backup configuration (shorter retention for staging)
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE=0 4 * * *
BACKUP_ENCRYPTION_KEY=staging-backup-encryption-key

# Database maintenance
DB_VACUUM_SCHEDULE=0 5 * * 0
LOG_ROTATION_DAYS=3

# ============================================================================
# Performance & Scaling
# ============================================================================
# Connection pooling (smaller pools for staging)
DB_POOL_MIN=1
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=5000

# Caching
CACHE_TTL=1800
REDIS_KEY_PREFIX=ai_engineer_staging:

# WebSocket configuration
WS_MAX_CONNECTIONS=100
WS_HEARTBEAT_INTERVAL=30000

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_TEAM_COLLABORATION=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_WORKFLOW_TEMPLATES=true
ENABLE_REAL_TIME_COLLABORATION=true
ENABLE_NOTIFICATIONS=true
ENABLE_API_DOCUMENTATION=true

# ============================================================================
# Development & Debug (can be more verbose in staging)
# ============================================================================
DEBUG=true
VERBOSE_LOGGING=true
ENABLE_PLAYGROUND=true